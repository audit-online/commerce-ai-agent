<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ Agent IA Premium - Questionnaire Vendeur</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .step { display: none; opacity: 0; transform: translateX(50px); transition: all 0.5s ease; }
        .step.active { display: block; opacity: 1; transform: translateX(0); }
        .question-card { transition: all 0.3s ease; }
        .question-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .option-btn { transition: all 0.2s ease; }
        .option-btn:hover { transform: scale(1.02); }
        .option-btn.selected { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.05);
        }
        .progress-bar { transition: width 0.5s ease; }
        .floating-btn { 
            position: fixed; 
            bottom: 30px; 
            right: 30px; 
            z-index: 1000;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .image-preview {
            background-size: cover;
            background-position: center;
            transition: all 0.3s ease;
        }
        .image-preview:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-white to-purple-50 min-h-screen">

<!-- Progress Bar -->
<div class="fixed top-0 left-0 w-full h-2 bg-gray-200 z-50">
    <div id="progressBar" class="progress-bar h-full bg-gradient-to-r from-blue-500 to-purple-600" style="width: 10%"></div>
</div>

<!-- Container Principal -->
<div class="container mx-auto px-4 py-8 max-w-4xl">

    <!-- Header -->
    <div class="text-center mb-8">
        <h1 class="text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4">
            ğŸ¯ Agent IA Premium
        </h1>
        <p class="text-xl text-gray-600">Questionnaire intelligent pour crÃ©er des templates qui VENDENT</p>
        <div class="flex justify-center mt-4">
            <span class="px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-semibold">
                âš¡ CrÃ©ation en 3 minutes
            </span>
        </div>
    </div>

    <!-- Ã‰TAPE 1: Identification MÃ©tier PrÃ©cise -->
    <div id="step1" class="step active">
        <div class="question-card bg-white rounded-3xl shadow-xl p-8 mb-6">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xl mr-4">1</div>
                <h2 class="text-3xl font-bold text-gray-800">Identifions votre mÃ©tier prÃ©cisÃ©ment</h2>
            </div>
            
            <p class="text-gray-600 mb-8 text-lg">Plus c'est prÃ©cis, plus le template sera percutant pour VOS clients !</p>
            
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Secteur principal -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">ğŸ¢ Secteur d'activitÃ©</label>
                    <select id="mainSector" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all">
                        <option value="">Choisissez votre secteur</option>
                        <option value="restauration">ğŸ½ï¸ Restauration & HÃ´tellerie</option>
                        <option value="commerce">ğŸ›ï¸ Commerce & Retail</option>
                        <option value="beaute">ğŸ’„ BeautÃ© & Bien-Ãªtre</option>
                        <option value="sante">ğŸ¥ SantÃ© & MÃ©dical</option>
                        <option value="technique">ğŸ”§ Services Techniques</option>
                        <option value="local">ğŸ“ Services de ProximitÃ©</option>
                        <option value="digital">ğŸ’» Digital & Tech</option>
                        <option value="education">ğŸ“š Ã‰ducation & Formation</option>
                        <option value="sport">âš½ Sport & Fitness</option>
                        <option value="immobilier">ğŸ  Immobilier</option>
                    </select>
                </div>
                
                <!-- SpÃ©cialitÃ© -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">ğŸ¯ SpÃ©cialitÃ© exacte</label>
                    <input type="text" id="specialty" placeholder="Ex: Pizzeria artisanale, Salon de coiffure bio..." 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all">
                </div>
            </div>
            
            <!-- Positionnement -->
            <div class="mt-6">
                <label class="block text-sm font-semibold text-gray-700 mb-3">â­ Positionnement sur le marchÃ©</label>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button onclick="selectPositioning('premium')" class="option-btn p-6 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300">
                        <div class="text-3xl mb-2">ğŸ‘‘</div>
                        <div class="font-semibold">Premium</div>
                        <div class="text-sm text-gray-600">Haut de gamme, luxe</div>
                    </button>
                    <button onclick="selectPositioning('standard')" class="option-btn p-6 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300">
                        <div class="text-3xl mb-2">ğŸ¯</div>
                        <div class="font-semibold">Standard</div>
                        <div class="text-sm text-gray-600">QualitÃ©-prix</div>
                    </button>
                    <button onclick="selectPositioning('accessible')" class="option-btn p-6 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300">
                        <div class="text-3xl mb-2">ğŸ’°</div>
                        <div class="font-semibold">Accessible</div>
                        <div class="text-sm text-gray-600">Prix compÃ©titifs</div>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="text-center">
            <button onclick="nextStep(2)" id="step1Next" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:shadow-lg transition-all disabled:opacity-50" disabled>
                Suivant : ClientÃ¨le Cible ğŸ“Š
            </button>
        </div>
    </div>

    <!-- Ã‰TAPE 2: Analyse ClientÃ¨le PoussÃ©e -->
    <div id="step2" class="step">
        <div class="question-card bg-white rounded-3xl shadow-xl p-8 mb-6">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white font-bold text-xl mr-4">2</div>
                <h2 class="text-3xl font-bold text-gray-800">Analysons votre clientÃ¨le cible</h2>
            </div>
            
            <p class="text-gray-600 mb-8 text-lg">Ces infos vont dÃ©finir le style, les couleurs et le ton du template</p>
            
            <!-- ClientÃ¨le principale -->
            <div class="mb-8">
                <label class="block text-sm font-semibold text-gray-700 mb-4">ğŸ‘¥ Votre clientÃ¨le principale (choisissez jusqu'Ã  3)</label>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="toggleTarget('local')" class="target-btn p-4 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300 transition-all">
                        <div class="text-2xl mb-2">ğŸ </div>
                        <div class="font-medium text-sm">Locale</div>
                    </button>
                    <button onclick="toggleTarget('touriste')" class="target-btn p-4 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300 transition-all">
                        <div class="text-2xl mb-2">ğŸ§³</div>
                        <div class="font-medium text-sm">Touristes</div>
                    </button>
                    <button onclick="toggleTarget('jeune')" class="target-btn p-4 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300 transition-all">
                        <div class="text-2xl mb-2">ğŸ¯</div>
                        <div class="font-medium text-sm">18-35 ans</div>
                    </button>
                    <button onclick="toggleTarget('famille')" class="target-btn p-4 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300 transition-all">
                        <div class="text-2xl mb-2">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                        <div class="font-medium text-sm">Familles</div>
                    </button>
                    <button onclick="toggleTarget('senior')" class="target-btn p-4 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300 transition-all">
                        <div class="text-2xl mb-2">ğŸ‘´</div>
                        <div class="font-medium text-sm">Seniors</div>
                    </button>
                    <button onclick="toggleTarget('pro')" class="target-btn p-4 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300 transition-all">
                        <div class="text-2xl mb-2">ğŸ’¼</div>
                        <div class="font-medium text-sm">Pro/B2B</div>
                    </button>
                    <button onclick="toggleTarget('luxe')" class="target-btn p-4 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300 transition-all">
                        <div class="text-2xl mb-2">ğŸ’</div>
                        <div class="font-medium text-sm">Luxe</div>
                    </button>
                    <button onclick="toggleTarget('etudiants')" class="target-btn p-4 border-2 border-gray-200 rounded-xl text-center hover:border-purple-300 transition-all">
                        <div class="text-2xl mb-2">ğŸ“</div>
                        <div class="font-medium text-sm">Ã‰tudiants</div>
                    </button>
                </div>
                <div class="mt-3 text-center">
                    <span class="text-sm text-gray-500">
                        <span id="selectedTargetsCount">0</span>/3 cibles sÃ©lectionnÃ©es
                    </span>
                </div>
            </div>
            
            <!-- Zone gÃ©ographique -->
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">ğŸ“ Zone gÃ©ographique</label>
                    <select id="geoZone" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 transition-all">
                        <option value="">SÃ©lectionnez votre zone</option>
                        <option value="hypercentre">ğŸ›ï¸ Hypercentre ville</option>
                        <option value="centre">ğŸª Centre-ville</option>
                        <option value="quartier">ğŸ˜ï¸ Quartier rÃ©sidentiel</option>
                        <option value="banlieue">ğŸ¡ Banlieue</option>
                        <option value="rural">ğŸŒ¾ Zone rurale</option>
                        <option value="zone-commerciale">ğŸ›’ Zone commerciale</option>
                        <option value="zone-touristique">ğŸ—¼ Zone touristique</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">ğŸ’° Budget moyen clientÃ¨le</label>
                    <select id="clientBudget" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 transition-all">
                        <option value="">Budget moyen</option>
                        <option value="economique">ğŸ’¸ Ã‰conomique (< 50â‚¬)</option>
                        <option value="moyen">ğŸ’³ Moyen (50-150â‚¬)</option>
                        <option value="confortable">ğŸ’ Confortable (150-500â‚¬)</option>
                        <option value="premium">ğŸ‘‘ Premium (500â‚¬+)</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="flex justify-between">
            <button onclick="prevStep(1)" class="bg-gray-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-600 transition-all">
                â† Retour
            </button>
            <button onclick="nextStep(3)" id="step2Next" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:shadow-lg transition-all disabled:opacity-50" disabled>
                Suivant : IdentitÃ© Visuelle ğŸ¨
            </button>
        </div>
    </div>

    <!-- Ã‰TAPE 3: IdentitÃ© Visuelle & Branding -->
    <div id="step3" class="step">
        <div class="question-card bg-white rounded-3xl shadow-xl p-8 mb-6">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-gradient-to-r from-pink-500 to-red-600 rounded-full flex items-center justify-center text-white font-bold text-xl mr-4">3</div>
                <h2 class="text-3xl font-bold text-gray-800">CrÃ©ons votre identitÃ© visuelle</h2>
            </div>
            
            <!-- Nom & Slogan -->
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">ğŸª Nom de votre Ã©tablissement</label>
                    <input type="text" id="businessName" placeholder="Ex: Chez Mario, Beauty Lab..." 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-pink-500 focus:ring-2 focus:ring-pink-200 transition-all">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-3">ğŸ’¬ Slogan / Accroche</label>
                    <input type="text" id="slogan" placeholder="Ex: L'authenticitÃ© italienne, Votre beautÃ© rÃ©vÃ©lÃ©e..." 
                           class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-pink-500 focus:ring-2 focus:ring-pink-200 transition-all">
                </div>
            </div>
            
            <!-- Style visuel -->
            <div class="mb-8">
                <label class="block text-sm font-semibold text-gray-700 mb-4">ğŸ¨ Style visuel souhaitÃ©</label>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="selectStyle('moderne')" class="style-btn p-6 border-2 border-gray-200 rounded-xl text-center hover:border-pink-300">
                        <div class="w-full h-24 bg-gradient-to-br from-gray-100 to-gray-300 rounded-lg mb-3 flex items-center justify-center">
                            <span class="text-2xl">âš¡</span>
                        </div>
                        <div class="font-semibold">Moderne</div>
                        <div class="text-xs text-gray-600">Ã‰purÃ©, tech</div>
                    </button>
                    <button onclick="selectStyle('chaleureux')" class="style-btn p-6 border-2 border-gray-200 rounded-xl text-center hover:border-pink-300">
                        <div class="w-full h-24 bg-gradient-to-br from-orange-100 to-red-200 rounded-lg mb-3 flex items-center justify-center">
                            <span class="text-2xl">ğŸ”¥</span>
                        </div>
                        <div class="font-semibold">Chaleureux</div>
                        <div class="text-xs text-gray-600">Convivial, cosy</div>
                    </button>
                    <button onclick="selectStyle('elegant')" class="style-btn p-6 border-2 border-gray-200 rounded-xl text-center hover:border-pink-300">
                        <div class="w-full h-24 bg-gradient-to-br from-purple-100 to-blue-200 rounded-lg mb-3 flex items-center justify-center">
                            <span class="text-2xl">âœ¨</span>
                        </div>
                        <div class="font-semibold">Ã‰lÃ©gant</div>
                        <div class="text-xs text-gray-600">Chic, raffinÃ©</div>
                    </button>
                    <button onclick="selectStyle('naturel')" class="style-btn p-6 border-2 border-gray-200 rounded-xl text-center hover:border-pink-300">
                        <div class="w-full h-24 bg-gradient-to-br from-green-100 to-green-200 rounded-lg mb-3 flex items-center justify-center">
                            <span class="text-2xl">ğŸŒ¿</span>
                        </div>
                        <div class="font-semibold">Naturel</div>
                        <div class="text-xs text-gray-600">Bio, authentique</div>
                    </button>
                </div>
            </div>
            
            <!-- Couleurs prÃ©fÃ©rÃ©es -->
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-4">ğŸŒˆ Couleurs de votre marque (2 couleurs max)</label>
                <div class="grid grid-cols-4 md:grid-cols-8 gap-3">
                    <button onclick="selectColor('#3B82F6')" class="color-btn w-16 h-16 rounded-xl border-4 border-gray-200 hover:border-gray-400 transition-all" style="background-color: #3B82F6;" title="Bleu professionnel"></button>
                    <button onclick="selectColor('#EF4444')" class="color-btn w-16 h-16 rounded-xl border-4 border-gray-200 hover:border-gray-400 transition-all" style="background-color: #EF4444;" title="Rouge passion"></button>
                    <button onclick="selectColor('#10B981')" class="color-btn w-16 h-16 rounded-xl border-4 border-gray-200 hover:border-gray-400 transition-all" style="background-color: #10B981;" title="Vert nature"></button>
                    <button onclick="selectColor('#F59E0B')" class="color-btn w-16 h-16 rounded-xl border-4 border-gray-200 hover:border-gray-400 transition-all" style="background-color: #F59E0B;" title="Orange Ã©nergie"></button>
                    <button onclick="selectColor('#8B5CF6')" class="color-btn w-16 h-16 rounded-xl border-4 border-gray-200 hover:border-gray-400 transition-all" style="background-color: #8B5CF6;" title="Violet crÃ©atif"></button>
                    <button onclick="selectColor('#EC4899')" class="color-btn w-16 h-16 rounded-xl border-4 border-gray-200 hover:border-gray-400 transition-all" style="background-color: #EC4899;" title="Rose tendance"></button>
                    <button onclick="selectColor('#6B7280')" class="color-btn w-16 h-16 rounded-xl border-4 border-gray-200 hover:border-gray-400 transition-all" style="background-color: #6B7280;" title="Gris Ã©lÃ©gant"></button>
                    <button onclick="selectColor('#1F2937')" class="color-btn w-16 h-16 rounded-xl border-4 border-gray-200 hover:border-gray-400 transition-all" style="background-color: #1F2937;" title="Noir premium"></button>
                </div>
                <div id="selectedColors" class="mt-4 flex gap-2"></div>
            </div>
        </div>
        
        <div class="flex justify-between">
            <button onclick="prevStep(2)" class="bg-gray-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-600 transition-all">
                â† Retour
            </button>
            <button onclick="nextStep(4)" id="step3Next" class="bg-gradient-to-r from-pink-600 to-red-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:shadow-lg transition-all disabled:opacity-50" disabled>
                Suivant : FonctionnalitÃ©s ğŸš€
            </button>
        </div>
    </div>

    <!-- Ã‰TAPE 4: FonctionnalitÃ©s Essentielles -->
    <div id="step4" class="step">
        <div class="question-card bg-white rounded-3xl shadow-xl p-8 mb-6">
            <div class="flex items-center mb-6">
                <div class="w-12 h-12 bg-gradient-to-r from-red-500 to-orange-600 rounded-full flex items-center justify-center text-white font-bold text-xl mr-4">4</div>
                <h2 class="text-3xl font-bold text-gray-800">FonctionnalitÃ©s indispensables</h2>
            </div>
            
            <p class="text-gray-600 mb-8 text-lg">SÃ©lectionnez les fonctionnalitÃ©s qui vont faire la diffÃ©rence pour VOS clients</p>
            
            <div id="functionalitiesContainer" class="grid md:grid-cols-2 gap-4">
                <!-- Les fonctionnalitÃ©s seront gÃ©nÃ©rÃ©es dynamiquement selon le mÃ©tier -->
            </div>
            
            <!-- Budget & Plan -->
            <div class="mt-8 p-6 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl border border-yellow-200">
                <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ’° Budget & Plan recommandÃ©</h3>
                <div class="grid md:grid-cols-3 gap-4">
                    <button onclick="selectPlan('basic')" class="plan-btn p-6 bg-white border-2 border-gray-200 rounded-xl text-center hover:border-orange-300 hover:shadow-lg transition-all">
                        <div class="text-2xl mb-2">ğŸ¥‰</div>
                        <div class="font-bold text-lg">BASIC</div>
                        <div class="text-2xl font-bold text-orange-600 my-2">49-79â‚¬</div>
                        <div class="text-sm text-gray-600">Template + fonctions essentielles</div>
                    </button>
                    <button onclick="selectPlan('premium')" class="plan-btn p-6 bg-white border-2 border-orange-400 rounded-xl text-center hover:border-orange-500 hover:shadow-lg transition-all shadow-md">
                        <div class="text-2xl mb-2">ğŸ¥ˆ</div>
                        <div class="font-bold text-lg">PREMIUM</div>
                        <div class="text-2xl font-bold text-orange-600 my-2">149-199â‚¬</div>
                        <div class="text-sm text-gray-600">Template + apps complÃ¨tes</div>
                        <div class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mt-2">RECOMMANDÃ‰</div>
                    </button>
                    <button onclick="selectPlan('excellence')" class="plan-btn p-6 bg-white border-2 border-gray-200 rounded-xl text-center hover:border-orange-300 hover:shadow-lg transition-all">
                        <div class="text-2xl mb-2">ğŸ¥‡</div>
                        <div class="font-bold text-lg">EXCELLENCE</div>
                        <div class="text-2xl font-bold text-orange-600 my-2">299-399â‚¬</div>
                        <div class="text-sm text-gray-600">Solution sur-mesure complÃ¨te</div>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="flex justify-between">
            <button onclick="prevStep(3)" class="bg-gray-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-600 transition-all">
                â† Retour
            </button>
            <button onclick="generatePremiumTemplate()" id="step4Next" class="bg-gradient-to-r from-red-600 to-orange-600 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:shadow-lg transition-all disabled:opacity-50" disabled>
                ğŸš€ GÃ‰NÃ‰RER MON TEMPLATE PREMIUM
            </button>
        </div>
    </div>

</div>

<!-- Floating Help Button -->
<button class="floating-btn bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
</button>

<script>
// Variables globales pour stocker les donnÃ©es
let premiumData = {
    // Ã‰tape 1: MÃ©tier
    mainSector: '',
    specialty: '',
    positioning: '',
    
    // Ã‰tape 2: ClientÃ¨le
    targetAudience: [],
    geoZone: '',
    clientBudget: '',
    
    // Ã‰tape 3: IdentitÃ©
    businessName: '',
    slogan: '',
    visualStyle: '',
    brandColors: [],
    
    // Ã‰tape 4: FonctionnalitÃ©s
    selectedFeatures: [],
    selectedPlan: '',
    
    // MÃ©tadonnÃ©es
    timestamp: new Date().toISOString(),
    questionnaire_version: '2.0'
};

let currentStep = 1;
const totalSteps = 4;

// FonctionnalitÃ©s par secteur
const sectorFeatures = {
    restauration: [
        { id: 'menu_digital', name: 'ğŸ“± Menu Digital Interactif', desc: 'Menu avec photos HD, allergÃ¨nes, prix' },
        { id: 'reservation', name: 'ğŸ“… RÃ©servation en ligne', desc: 'Planning temps rÃ©el avec confirmations SMS' },
        { id: 'commande_ligne', name: 'ğŸ›’ Commande & Livraison', desc: 'Click & collect, livraison intÃ©grÃ©e' },
        { id: 'avis_clients', name: 'â­ Avis & Reviews', desc: 'SystÃ¨me d\'avis avec photos plats' },
        { id: 'programme_fidelite', name: 'ğŸ Programme FidÃ©litÃ©', desc: 'Points, rÃ©compenses, offres VIP' },
        { id: 'carte_vins', name: 'ğŸ· Carte des Vins', desc: 'Accords mets-vins, suggestions sommelier' },
        { id: 'evenements', name: 'ğŸ‰ Gestion Ã‰vÃ©nements', desc: 'Privatisation, Ã©vÃ©nements spÃ©ciaux' },
        { id: 'chef_story', name: 'ğŸ‘¨â€ğŸ³ Histoire du Chef', desc: 'Storytelling, origine des produits' }
    ],
    commerce: [
        { id: 'catalogue_produits', name: 'ğŸ·ï¸ Catalogue Produits', desc: 'Photos 360Â°, descriptions dÃ©taillÃ©es' },
        { id: 'tailles_couleurs', name: 'ğŸ‘” Variantes Produits', desc: 'Tailles, couleurs, stock temps rÃ©el' },
        { id: 'click_collect', name: 'ğŸ“¦ Click & Collect', desc: 'Commande en ligne, retrait magasin' },
        { id: 'recommendations', name: 'ğŸ¯ Recommandations IA', desc: 'Suggestions personnalisÃ©es' },
        { id: 'lookbook', name: 'ğŸ“¸ Lookbook & Styling', desc: 'Inspiration, conseils style' },
        { id: 'programme_vip', name: 'ğŸ’ Programme VIP', desc: 'Avantages clients privilÃ©giÃ©s' },
        { id: 'try_before', name: 'ğŸ‘— Essayage Virtuel', desc: 'RÃ©alitÃ© augmentÃ©e' },
        { id: 'personal_shopper', name: 'ğŸ›ï¸ Personal Shopper', desc: 'Conseil personnalisÃ© en ligne' }
    ],
    beaute: [
        { id: 'prise_rdv', name: 'ğŸ’… Prise RDV Intelligente', desc: 'Planning automatisÃ© avec rappels' },
        { id: 'galerie_avant_apres', name: 'âœ¨ Galerie Avant/AprÃ¨s', desc: 'Portfolio transformations clients' },
        { id: 'conseils_beaute', name: 'ğŸ’„ Conseils BeautÃ©', desc: 'Tips personnalisÃ©s selon type peau' },
        { id: 'produits_maison', name: 'ğŸ§´ Boutique Produits', desc: 'Vente produits utilisÃ©s en salon' },
        { id: 'diagnostic_peau', name: 'ğŸ” Diagnostic Peau', desc: 'Analyse personnalisÃ©e en ligne' },
        { id: 'forfaits_soins', name: 'ğŸ’†â€â™€ï¸ Forfaits & Abonnements', desc: 'Packages soins rÃ©guliers' },
        { id: 'equipe_experts', name: 'ğŸ‘¥ Ã‰quipe d\'Experts', desc: 'Profils spÃ©cialistes, certifications' },
        { id: 'tendances_saison', name: 'ğŸŒŸ Tendances Saison', desc: 'ActualitÃ©s beautÃ©, nouveautÃ©s' }
    ],
    sante: [
        { id: 'prise_rdv_medical', name: 'ğŸ¥ Prise RDV MÃ©dicale', desc: 'Planning praticiens avec spÃ©cialitÃ©s' },
        { id: 'teleconsultation', name: 'ğŸ’» TÃ©lÃ©consultation', desc: 'Consultations vidÃ©o sÃ©curisÃ©es' },
        { id: 'dossier_patient', name: 'ğŸ“‹ Dossier Patient', desc: 'Historique sÃ©curisÃ©, ordonnances' },
        { id: 'rappel_medicaments', name: 'ğŸ’Š Rappels MÃ©dicaments', desc: 'Notifications prises, renouvellements' },
        { id: 'equipe_medicale', name: 'ğŸ‘¨â€âš•ï¸ Ã‰quipe MÃ©dicale', desc: 'Profils praticiens, spÃ©cialitÃ©s' },
        { id: 'urgences', name: 'ğŸš¨ Gestion Urgences', desc: 'Contact prioritaire, gÃ©olocalisation' },
        { id: 'preventions', name: 'ğŸ›¡ï¸ PrÃ©vention SantÃ©', desc: 'Conseils, rappels check-ups' },
        { id: 'assurances', name: 'ğŸ“„ Gestion Assurances', desc: 'Tiers payant, remboursements' }
    ],
    technique: [
        { id: 'devis_ligne', name: 'ğŸ“ Devis en Ligne', desc: 'Estimation automatique selon photos' },
        { id: 'planning_interventions', name: 'ğŸ”§ Planning Interventions', desc: 'CrÃ©neaux disponibles en temps rÃ©el' },
        { id: 'suivi_reparations', name: 'ğŸ“Š Suivi RÃ©parations', desc: 'Ã‰tapes travaux, photos progression' },
        { id: 'garanties', name: 'ğŸ›¡ï¸ Gestion Garanties', desc: 'Suivi garanties, extensions' },
        { id: 'stock_pieces', name: 'âš™ï¸ Stock PiÃ¨ces', desc: 'DisponibilitÃ© piÃ¨ces, dÃ©lais' },
        { id: 'urgences_24h', name: 'ğŸš¨ Urgences 24h/7j', desc: 'Intervention express, surcoÃ»t' },
        { id: 'certifications', name: 'ğŸ† Certifications', desc: 'AgrÃ©ments, assurances, qualifications' },
        { id: 'factures_digitales', name: 'ğŸ“± Factures Digitales', desc: 'Facturing auto, paiement en ligne' }
    ],
    local: [
        { id: 'systeme_tickets', name: 'ğŸ« SystÃ¨me Tickets', desc: 'QR codes, suivi Ã©tapes' },
        { id: 'notifications_pret', name: 'ğŸ”” Notifications PrÃªt', desc: 'SMS/Email quand c\'est prÃªt' },
        { id: 'tarifs_transparents', name: 'ğŸ’° Tarifs Transparents', desc: 'Grille tarifaire claire, estimations' },
        { id: 'collecte_livraison', name: 'ğŸšš Collecte/Livraison', desc: 'Service Ã  domicile' },
        { id: 'programme_fidelite', name: 'ğŸ Carte FidÃ©litÃ©', desc: 'Points, remises fidÃ©litÃ©' },
        { id: 'conseils_entretien', name: 'ğŸ’¡ Conseils Entretien', desc: 'Tips prÃ©servation, durÃ©e de vie' },
        { id: 'eco_responsable', name: 'ğŸŒ± Eco-Responsable', desc: 'Pratiques Ã©cologiques, recyclage' },
        { id: 'horaires_etendus', name: 'â° Horaires Ã‰tendus', desc: 'DÃ©pÃ´t/retrait horaires flexibles' }
    ],
    digital: [
        { id: 'portfolio_projets', name: 'ğŸ’¼ Portfolio Projets', desc: 'Showcases rÃ©alisations clients' },
        { id: 'devis_intelligent', name: 'ğŸ¤– Devis Intelligent', desc: 'Estimation automatique selon besoins' },
        { id: 'process_creation', name: 'âš¡ Process CrÃ©ation', desc: 'Ã‰tapes projet, validation client' },
        { id: 'testimonials_video', name: 'ğŸ¥ TÃ©moignages VidÃ©o', desc: 'Avis clients authentiques' },
        { id: 'expertise_technique', name: 'ğŸ› ï¸ Expertise Technique', desc: 'Stack technique, certifications' },
        { id: 'maintenance_support', name: 'ğŸ”§ Maintenance & Support', desc: 'SAV, mises Ã  jour, hotline' },
        { id: 'references_clients', name: 'ğŸ¢ RÃ©fÃ©rences Clients', desc: 'Logos clients, Ã©tudes de cas' },
        { id: 'blog_expertise', name: 'ğŸ“ Blog Expertise', desc: 'Articles techniques, actualitÃ©s' }
    ],
    education: [
        { id: 'cours_ligne', name: 'ğŸ“š Cours en Ligne', desc: 'Modules e-learning interactifs' },
        { id: 'planning_cours', name: 'ğŸ“… Planning Cours', desc: 'RÃ©servation crÃ©neaux, groupes' },
        { id: 'suivi_progression', name: 'ğŸ“ˆ Suivi Progression', desc: 'Tableaux de bord Ã©lÃ¨ves/parents' },
        { id: 'ressources_pedagogiques', name: 'ğŸ“– Ressources PÃ©dagogiques', desc: 'BibliothÃ¨que documents, vidÃ©os' },
        { id: 'evaluations', name: 'âœ… Ã‰valuations', desc: 'Quiz, examens blancs, corrections' },
        { id: 'communication_parents', name: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Communication Parents', desc: 'Bulletins, rendez-vous, messages' },
        { id: 'equipe_pedagogique', name: 'ğŸ‘¨â€ğŸ« Ã‰quipe PÃ©dagogique', desc: 'Profils formateurs, spÃ©cialitÃ©s' },
        { id: 'certifications_diplomes', name: 'ğŸ“ Certifications', desc: 'DiplÃ´mes, attestations, badges' }
    ],
    sport: [
        { id: 'reservation_cours', name: 'ğŸƒâ€â™‚ï¸ RÃ©servation Cours', desc: 'Planning activitÃ©s, coachs' },
        { id: 'suivi_performance', name: 'ğŸ“Š Suivi Performance', desc: 'Objectifs, progression, stats' },
        { id: 'programmes_entrainement', name: 'ğŸ’ª Programmes EntraÃ®nement', desc: 'Plans personnalisÃ©s selon objectifs' },
        { id: 'nutrition_conseils', name: 'ğŸ¥— Conseils Nutrition', desc: 'Plans alimentaires, recettes' },
        { id: 'coaching_perso', name: 'ğŸ‘¨â€ğŸ’¼ Coaching Personnel', desc: 'Suivi individuel, motivation' },
        { id: 'challenges_communaute', name: 'ğŸ† Challenges CommunautÃ©', desc: 'DÃ©fis groupe, classements' },
        { id: 'materiel_location', name: 'ğŸ‹ï¸â€â™‚ï¸ MatÃ©riel & Location', desc: 'Ã‰quipements disponibles' },
        { id: 'vestiaires_services', name: 'ğŸš¿ Services Vestiaires', desc: 'Casiers, douches, commoditÃ©s' }
    ],
    immobilier: [
        { id: 'visite_virtuelle', name: 'ğŸ  Visites Virtuelles', desc: 'Tours 360Â°, rÃ©alitÃ© augmentÃ©e' },
        { id: 'estimation_bien', name: 'ğŸ’° Estimation Bien', desc: 'Ã‰valuation automatique prix marchÃ©' },
        { id: 'dossier_location', name: 'ğŸ“‹ Dossier Location', desc: 'Constitution dossier digital' },
        { id: 'alerte_biens', name: 'ğŸ”” Alertes Biens', desc: 'Notifications nouveautÃ©s selon critÃ¨res' },
        { id: 'financement_aide', name: 'ğŸ¦ Aide Financement', desc: 'Simulation prÃªts, partenaires banques' },
        { id: 'quartier_infos', name: 'ğŸ—ºï¸ Infos Quartier', desc: 'Services, transports, Ã©coles' },
        { id: 'conseiller_dedie', name: 'ğŸ‘¨â€ğŸ’¼ Conseiller DÃ©diÃ©', desc: 'Agent rÃ©fÃ©rent, expertise locale' },
        { id: 'documents_legaux', name: 'ğŸ“„ Documents LÃ©gaux', desc: 'Contrats, diagnostics, certificats' }
    ]
};

// Navigation entre Ã©tapes
function nextStep(step) {
    if (validateCurrentStep()) {
        currentStep = step;
        updateProgressBar();
        showStep(step);
        
        // GÃ©nÃ©rer les fonctionnalitÃ©s dynamiquement Ã  l'Ã©tape 4
        if (step === 4) {
            generateFunctionalities();
        }
    }
}

function prevStep(step) {
    currentStep = step;
    updateProgressBar();
    showStep(step);
}

function showStep(step) {
    // Masquer toutes les Ã©tapes
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    
    // Afficher l'Ã©tape demandÃ©e
    setTimeout(() => {
        document.getElementById(`step${step}`).classList.add('active');
    }, 100);
}

function updateProgressBar() {
    const progress = (currentStep / totalSteps) * 100;
    document.getElementById('progressBar').style.width = progress + '%';
}

// Validation des Ã©tapes
function validateCurrentStep() {
    switch(currentStep) {
        case 1:
            const sector = document.getElementById('mainSector').value;
            const specialty = document.getElementById('specialty').value;
            return sector && specialty && premiumData.positioning;
            
        case 2:
            return premiumData.targetAudience.length > 0 && 
                   document.getElementById('geoZone').value &&
                   document.getElementById('clientBudget').value;
                   
        case 3:
            return document.getElementById('businessName').value && 
                   premiumData.visualStyle && 
                   premiumData.brandColors.length > 0;
                   
        case 4:
            return premiumData.selectedFeatures.length > 0 && premiumData.selectedPlan;
            
        default:
            return true;
    }
}

// Fonctions de sÃ©lection
function selectPositioning(pos) {
    premiumData.positioning = pos;
    document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
    event.target.closest('.option-btn').classList.add('selected');
    updateStepValidation(1);
}

function toggleTarget(target) {
    const index = premiumData.targetAudience.indexOf(target);
    const btn = event.target.closest('.target-btn');
    
    if (index === -1 && premiumData.targetAudience.length < 3) { // AugmentÃ© de 2 Ã  3 cibles max
        premiumData.targetAudience.push(target);
        btn.classList.add('selected');
    } else if (index !== -1) {
        premiumData.targetAudience.splice(index, 1);
        btn.classList.remove('selected');
    } else if (premiumData.targetAudience.length >= 3) {
        // Message si tentative de sÃ©lectionner plus de 3
        showTemporaryMessage(btn, 'Maximum 3 cibles');
    }
    
    // Mettre Ã  jour le compteur
    document.getElementById('selectedTargetsCount').textContent = premiumData.targetAudience.length;
    updateStepValidation(2);
}

// Fonction pour afficher un message temporaire
function showTemporaryMessage(element, message) {
    const originalText = element.innerHTML;
    element.innerHTML = `<div class="text-xs text-red-600">${message}</div>`;
    element.classList.add('border-red-300', 'bg-red-50');
    
    setTimeout(() => {
        element.innerHTML = originalText;
        element.classList.remove('border-red-300', 'bg-red-50');
    }, 2000);
}

function selectStyle(style) {
    premiumData.visualStyle = style;
    document.querySelectorAll('.style-btn').forEach(btn => btn.classList.remove('selected'));
    event.target.closest('.style-btn').classList.add('selected');
    updateStepValidation(3);
}

function selectColor(color) {
    const index = premiumData.brandColors.indexOf(color);
    const btn = event.target;
    
    if (index === -1 && premiumData.brandColors.length < 2) {
        premiumData.brandColors.push(color);
        btn.classList.add('selected');
        btn.style.borderColor = '#059669';
        btn.style.borderWidth = '4px';
    } else if (index !== -1) {
        premiumData.brandColors.splice(index, 1);
        btn.classList.remove('selected');
        btn.style.borderColor = '#D1D5DB';
        btn.style.borderWidth = '4px';
    }
    
    updateSelectedColorsDisplay();
    updateStepValidation(3);
}

function updateSelectedColorsDisplay() {
    const container = document.getElementById('selectedColors');
    container.innerHTML = premiumData.brandColors.map(color => 
        `<div class="w-8 h-8 rounded-lg border-2 border-gray-300" style="background-color: ${color};"></div>`
    ).join('');
}

function toggleFeature(featureId) {
    const index = premiumData.selectedFeatures.indexOf(featureId);
    const checkbox = event.target;
    
    if (index === -1) {
        premiumData.selectedFeatures.push(featureId);
    } else {
        premiumData.selectedFeatures.splice(index, 1);
    }
    updateStepValidation(4);
}

function selectPlan(plan) {
    premiumData.selectedPlan = plan;
    document.querySelectorAll('.plan-btn').forEach(btn => btn.classList.remove('selected'));
    event.target.closest('.plan-btn').classList.add('selected');
    updateStepValidation(4);
}

function updateStepValidation(step) {
    const nextBtn = document.getElementById(`step${step}Next`);
    if (nextBtn) {
        nextBtn.disabled = !validateCurrentStep();
    }
}

// GÃ©nÃ©ration dynamique des fonctionnalitÃ©s
function generateFunctionalities() {
    const sector = document.getElementById('mainSector').value;
    const container = document.getElementById('functionalitiesContainer');
    
    if (!sectorFeatures[sector]) return;
    
    const features = sectorFeatures[sector];
    container.innerHTML = features.map(feature => `
        <div class="feature-card bg-white border-2 border-gray-200 rounded-xl p-4 hover:border-orange-300 hover:shadow-md transition-all">
            <div class="flex items-start">
                <input type="checkbox" id="feature_${feature.id}" onchange="toggleFeature('${feature.id}')" 
                       class="mt-1 mr-3 w-5 h-5 text-orange-600 rounded focus:ring-orange-500">
                <div class="flex-1">
                    <label for="feature_${feature.id}" class="cursor-pointer">
                        <div class="font-semibold text-gray-800 mb-1">${feature.name}</div>
                        <div class="text-sm text-gray-600">${feature.desc}</div>
                    </label>
                </div>
            </div>
        </div>
    `).join('');
}

// GÃ©nÃ©ration du template premium
function generatePremiumTemplate() {
    // Collecter toutes les donnÃ©es finales
    premiumData.mainSector = document.getElementById('mainSector').value;
    premiumData.specialty = document.getElementById('specialty').value;
    premiumData.geoZone = document.getElementById('geoZone').value;
    premiumData.clientBudget = document.getElementById('clientBudget').value;
    premiumData.businessName = document.getElementById('businessName').value;
    premiumData.slogan = document.getElementById('slogan').value;
    
    console.log('ğŸš€ GÃ©nÃ©ration template premium avec donnÃ©es complÃ¨tes:', premiumData);
    
    // Envoyer au systÃ¨me principal
    if (window.parent !== window) {
        window.parent.postMessage({
            type: 'GENERATE_PREMIUM_TEMPLATE',
            data: premiumData,
            timestamp: new Date().toISOString()
        }, '*');
    }
    
    // Redirection vers le gÃ©nÃ©rateur de templates
    window.location.href = 'generator.html?data=' + encodeURIComponent(JSON.stringify(premiumData));
}

// Event listeners pour validation temps rÃ©el
document.addEventListener('DOMContentLoaded', function() {
    // Ã‰tape 1
    document.getElementById('mainSector').addEventListener('change', () => updateStepValidation(1));
    document.getElementById('specialty').addEventListener('input', () => updateStepValidation(1));
    
    // Ã‰tape 2  
    document.getElementById('geoZone').addEventListener('change', () => updateStepValidation(2));
    document.getElementById('clientBudget').addEventListener('change', () => updateStepValidation(2));
    
    // Ã‰tape 3
    document.getElementById('businessName').addEventListener('input', () => updateStepValidation(3));
    document.getElementById('slogan').addEventListener('input', () => updateStepValidation(3));
    
    console.log('ğŸ¯ Questionnaire Premium initialisÃ© !');
});

// Health check
window.healthCheck = function() {
    return {
        status: 'healthy',
        version: '2.0-premium',
        timestamp: new Date().toISOString(),
        currentStep: currentStep,
        dataCollected: Object.keys(premiumData).filter(key => premiumData[key] && premiumData[key] !== '').length
    };
};
</script>

</body>
</html>
